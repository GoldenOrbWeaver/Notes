% From Pingbang Hu, https://github.com/sleepymalc/LaTeX-Template 
% theorems
\makeatother
\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}

\mdfsetup{skipabove=1em,skipbelow=0em}

\theoremstyle{definition}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{ForestGreen!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=ForestGreen, backgroundcolor=ForestGreen!5,
			nobreak=false
		}
]{thmgreenbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{ForestGreen!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=ForestGreen, backgroundcolor=ForestGreen!8,
			nobreak=false
		}
]{thmgreen2box}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=NavyBlue, backgroundcolor=NavyBlue!5,
			nobreak=false
		}
]{thmbluebox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{TealBlue!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=TealBlue,
			nobreak=false
		}
]{thmblueline}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=RawSienna, backgroundcolor=RawSienna!5,
			nobreak=false
		}
]{thmredbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=RawSienna, backgroundcolor=RawSienna!8,
			nobreak=false
		}
]{thmred2box}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{SeaGreen!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=SeaGreen, backgroundcolor=SeaGreen!2,
			nobreak=false
		}
]{thmgreen3box}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{WildStrawberry!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=WildStrawberry, backgroundcolor=WildStrawberry!5,
			nobreak=false
		}
]{thmpinkbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{MidnightBlue!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=MidnightBlue, backgroundcolor=MidnightBlue!5,
			nobreak=false
		}
]{thmblue2box}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{Gray!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=Gray, backgroundcolor=Gray!5,
			nobreak=false
		}
]{notgraybox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{Gray!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=Gray,
			nobreak=false
		}
]{notgrayline}

% \declaretheoremstyle[
% 	headfont=\bfseries\sffamily\color{RawSienna!70!black}, bodyfont=\normalfont,
% 	numbered=no,
% 	mdframed={
% 			linewidth=2pt,
% 			rightline=false, topline=false, bottomline=false,
% 			linecolor=RawSienna, backgroundcolor=RawSienna!1,
% 		},
% 	qed=\qedsymbol
% ]{thmproofbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{NavyBlue!70!black}, bodyfont=\normalfont,
	numbered=no,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=NavyBlue, backgroundcolor=NavyBlue!1,
			nobreak=false
		}
]{thmexplanationbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{WildStrawberry!70!black}, bodyfont=\normalfont,
	numbered=no,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=WildStrawberry, backgroundcolor=WildStrawberry!1,
			nobreak=false
		}
]{thmanswerbox}

\declaretheoremstyle[
	headfont=\bfseries\sffamily\color{Violet!70!black}, bodyfont=\normalfont,
	mdframed={
			linewidth=2pt,
			rightline=false, topline=false, bottomline=false,
			linecolor=Violet, backgroundcolor=Violet!1,
			nobreak=false
		}
]{conjpurplebox}

\declaretheorem[style=thmgreenbox, name=Definition, numberwithin=section]{definition}
\declaretheorem[style=thmgreen2box, name=Definition, numbered=no]{definition*}
\declaretheorem[style=thmredbox, name=Theorem, numberwithin=section]{theorem}
\declaretheorem[style=thmred2box, name=Theorem, numbered=no]{theorem*}
\declaretheorem[style=thmredbox, name=Lemma, numberwithin=section]{lemma}
\declaretheorem[style=thmredbox, name=Proposition, numberwithin=section]{proposition}
\declaretheorem[style=thmredbox, name=Corollary, numberwithin=section]{corollary}
\declaretheorem[style=thmpinkbox, name=Problem, numberwithin=section]{problem}
\declaretheorem[style=thmpinkbox, name=Problem, numbered=no]{problem*}
\declaretheorem[style=thmblue2box, name=Claim, numbered=no]{claim}
\declaretheorem[style=conjpurplebox, name=Conjecture, numberwithin=section]{conjecture}

\renewcommand\theHdefinition{\thesection.\arabic {definition}}
\renewcommand\theHtheorem{\thesection.\arabic {theorem}}
\renewcommand\theHlemma{\thesection.\arabic {lemma}}
\renewcommand\theHproposition{\thesection.\arabic {proposition}}
\renewcommand\theHcorollary{\thesection.\arabic {corollary}}
\renewcommand\theHproblem{\thesection.\arabic {problem}}
\renewcommand\theHconjecture{\thesection.\arabic {conjecture}}

% Redefine proof environment to get a full control.
\makeatletter
\renewenvironment{proof}[1][\proofname]{\par
	\pushQED{\qed}%
	\normalfont \topsep-2\p@\@plus6\p@\relax
	\trivlist
	\item[\hskip\labelsep
	            \color{RawSienna!70!black}\sffamily\bfseries
	            #1\@addpunct{.}]\ignorespaces
	\begin{mdframed}[linewidth=2pt,rightline=false, topline=false, bottomline=false,linecolor=RawSienna, backgroundcolor=RawSienna!1]
		}{%
		\popQED\endtrivlist\@endpefalse
	\end{mdframed}
}
\makeatother

\declaretheorem[style=thmbluebox, numbered=no, name=Example]{eg}
\declaretheorem[style=thmexplanationbox, numbered=no, name=Proof]{tmpexplanation}
\newenvironment{explanation}[1][]{\vspace{-10pt}\pushQED{\(\circledast\)}\begin{tmpexplanation}}{\null\hfill\popQED\end{tmpexplanation}}

\declaretheorem[style=thmblueline, numbered=no, name=Remark]{remark}
\declaretheorem[style=thmblueline, numbered=no, name=Note]{note}
\declaretheorem[style=thmpinkbox, numbered=no, name=Exercise]{exercise}
\declaretheorem[style=notgrayline, numbered=no, name=As previously seen]{prev}
\declaretheorem[style=thmgreen3box, numbered=no, name=Intuition]{intuition}
\declaretheorem[style=notgraybox, numbered=no, name=Notation]{notation}
\declaretheorem[style=thmanswerbox, numbered=no, name=Answer]{tmpanswer}
\newenvironment{answer}[1][]{\vspace{-10pt}\pushQED{\(\circledast\)}\begin{tmpanswer}}{\null\hfill\popQED\end{tmpanswer}}
